<header class="header">
  <div class="header_box main-center">
    <div class="header_box_logo">
      <img src="__TMPL__/static/img/logo.jpg" alt="">
    </div>

    <!-- pc端显示 -->
    <div class="header_box_nav">
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/index/index?_design_theme=default_en-us')}">Home</a>
      </div>
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/Carbontrace/index?_design_theme=default_en-us')}">Carbon Trace</a>
      </div>
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/Products/index?_design_theme=default_en-us')}">Products</a>
      </div>
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/Supplychain/index?_design_theme=default_en-us')}">Supply Chain</a>
      </div>
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/Warehouse/index?_design_theme=default_en-us')}">Warehouse</a>
      </div>
      <div class="header_box_nav_item">
        <a href="{:cmf_url('portal/About/index?_design_theme=default_en-us')}">About</a>
      </div>
    </div>
    <div class="header_box_btn">
      <a href="http://www.ecocarbontrace.com/" target="_blank">log In</a>
    </div>
    <div class="header_box_language">
      <!-- <img src="__TMPL__/static/img/language.png" alt="">-->
      <a href="?_design_theme=default"> <img src="__TMPL__/static/img/language.png" alt=""></a>
      <!--      <a href="?_design_theme=default">中文</a>|<a href="?_design_theme=default_en-us">En</a>-->
    </div>

    <!-- 手机和平板 -->
    <div class="header_box_phone_btn">
      <img class="header_box_phone_btn_menu" src="__TMPL__/static/img/menu.png" alt="">
      <img class="header_box_phone_btn_close" src="__TMPL__/static/img/close.png" alt="">
    </div>
  </div>

  <div class="header_box_phone_navBox">
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/index/index?_design_theme=default_en-us')}">Home</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Carbontrace/index?_design_theme=default_en-us')}">Carbon Trace</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Products/index?_design_theme=default_en-us')}">Products</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Supplychain/index?_design_theme=default_en-us')}">Supply Chain</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Warehouse/index?_design_theme=default_en-us')}">Warehouse</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/About/index?_design_theme=default_en-us')}">About</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="http://www.ecocarbontrace.com/" target="_blank">Log In</a>
    </div>

    <div class="header_box_phone_navBox_img">
      <a href="?_design_theme=default"><img src="__TMPL__/static/img/language.png" alt=""></a>
    </div>
  </div>
  <taglib name="app\portal\taglib\Portal" />
</header>

<script>
  // http://carbontracking.com/?_design_theme=default_en-us
  var path = window.location.pathname
  var headerBoxNavItems = document.querySelectorAll('.header_box_nav_item')
  headerBoxNavItems.forEach(function (item) {
    var a = item.querySelector('a')

    const pathString = path
    const thirdDotIndex = pathString.indexOf('.', pathString.indexOf('.') + 1)
    const result = pathString.slice(0, thirdDotIndex)
    console.log(thirdDotIndex)

    if (a.getAttribute('href').indexOf(result) !== -1) {
      item.classList.add('active')
    }
  })

  // 手机端导航
  var headerBoxPhoneBtnMenu = document.getElementsByClassName('header_box_phone_btn_menu')[0]
  var headerBoxPhoneBtnClose = document.getElementsByClassName('header_box_phone_btn_close')[0]
  var headerBoxPhoneNavBox = document.getElementsByClassName('header_box_phone_navBox')[0]
  headerBoxPhoneBtnMenu.onclick = function () {
    headerBoxPhoneBtnClose.style = 'display : block'
    headerBoxPhoneBtnMenu.style = 'display : none'
    headerBoxPhoneNavBox.style = 'transform : translateY(0)'
  }
  headerBoxPhoneBtnClose.onclick = function () {
    headerBoxPhoneBtnClose.style = 'display : none'
    headerBoxPhoneBtnMenu.style = 'display : block'
    headerBoxPhoneNavBox.style = 'transform : translateY(-100%)'
  }
</script>