<header class="header">
  <div class="header_box main-center">
    <div class="header_box_logo">
      <a href="{:cmf_url('portal/index/index?_design_theme=default_en-us')}">
        <img src="__STATIC__/images/logo_new.png" alt="">
        <div class="header_title">
          <div class="header_title_big">Celtic international Limited</div>
          <div class="header_title_small">海南凯尔特</div>
        </div>
      </a>
    </div>

    <!-- pc端显示 -->
    <div class="header_box_container">
      <div class="header_box_topnav">
        <li>
          <a class="header_box_nav_item_index"
            href="{:cmf_url('portal/index/index?_design_theme=default_en-us')}">Home</a>
          <a> | </a>
          <a href="?_design_theme=default"> 简中 </a> <a> | </a>

          <a class="header_box_nav_item_index" href="http://www.ecocarbontrace.com/" target="_blank">log in</a>

        </li>

      </div>
      <div class="header_box_nav">
        <div class="header_box_nav_item">
          <div class="dropdown">
            <a class="header_box_nav_item_index" href="{:cmf_url('portal/Products/index?_design_theme=default_en-us')}"
              class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="true">
              Products</a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-menu-item"><a
                  href="{:cmf_url('portal/Products/index?_design_theme=default_en-us')}">Products</a></li>
              <li role="separator" class="divider"></li>
              <portal:subCategories categoryId="35" item="vo">
                <li class="dropdown-menu-item"><a
                    href="{:cmf_url('portal/List/index?_design_theme=default_en-us',array('id'=>$vo.id))}">{$vo.name}</a>
                </li>
                <li role="separator" class="divider"></li>
              </portal:subCategories>
            </ul>
          </div>
        </div>
        <div class="header_box_nav_item">
          <div class="dropdown">
            <a class="header_box_nav_item_index"
              href="{:cmf_url('portal/Supplychain/index?_design_theme=default_en-us')}" class="dropdown-toggle"
              id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Supply Chain</a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-menu-item"><a
                  href="{:cmf_url('portal/Supplychain/index?_design_theme=default_en-us')}">Supply Chain</a></li>
              <li role="separator" class="divider"></li>
              <portal:subCategories categoryId="130" item="vo">
                <li class="dropdown-menu-item"><a
                    href="{:cmf_url('portal/List/index?_design_theme=default_en-us',array('id'=>$vo.id))}">{$vo.name}</a>
                </li>
                <li role="separator" class="divider"></li>
              </portal:subCategories>
            </ul>
          </div>
        </div>
        <div class="header_box_nav_item">
          <div class="dropdown">
            <a class="header_box_nav_item_index"
              href="{:cmf_url('portal/Carbontrace/index?_design_theme=default_en-us')}" class="dropdown-toggle"
              id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Carbon Trace</a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-menu-item"><a
                  href="{:cmf_url('portal/Carbontrace/index?_design_theme=default_en-us')}">Carbon Trace</a></li>
              <li role="separator" class="divider"></li>
              <portal:subCategories categoryId="133" item="vo">
                <li class="dropdown-menu-item"><a
                    href="{:cmf_url('portal/List/index?_design_theme=default_en-us',array('id'=>$vo.id))}">{$vo.name}</a>
                </li>
                <li role="separator" class="divider"></li>
              </portal:subCategories>
            </ul>
          </div>
        </div>
        <div class="header_box_nav_item">
          <div class="dropdown">
            <a class="header_box_nav_item_index" href="{:cmf_url('portal/Warehouse/index?_design_theme=default_en-us')}"
              class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="true">Warehouse</a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-menu-item"><a
                  href="{:cmf_url('portal/Warehouse/index?_design_theme=default_en-us')}">Warehouse</a></li>
              <li role="separator" class="divider"></li>
              <portal:subCategories categoryId="136" item="vo">
                <li class="dropdown-menu-item"><a
                    href="{:cmf_url('portal/List/index?_design_theme=default_en-us',array('id'=>$vo.id))}">{$vo.name}</a>
                </li>
                <li role="separator" class="divider"></li>
              </portal:subCategories>
            </ul>
          </div>
        </div>
        <div class="header_box_nav_item">
          <div class="dropdown">
            <a class="header_box_nav_item_index" href="{:cmf_url('portal/Building/index?_design_theme=default_en-us')}"
              class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="true">Building Design</a>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-menu-item"><a
                  href="{:cmf_url('portal/Building/index?_design_theme=default_en-us')}">Building Design</a></li>
              <li role="separator" class="divider"></li>
              <portal:subCategories categoryId="138" item="vo">
                <li class="dropdown-menu-item"><a
                    href="{:cmf_url('portal/List/index?_design_theme=default_en-us',array('id'=>$vo.id))}">{$vo.name}</a>
                </li>
                <li role="separator" class="divider"></li>
              </portal:subCategories>
            </ul>
          </div>
        </div>
        <div class="header_box_nav_item">
          <a class="header_box_nav_item_index"
            href="{:cmf_url('portal/About/index?_design_theme=default_en-us')}">About</a>
        </div>
      </div>
    </div>
    <!-- <div class="header_box_btn">
      <a href="http://www.ecocarbontrace.com/" target="_blank">log In</a>
    </div>
    <div class="header_box_language">
  
      <a href="?_design_theme=default"> <img src="__TMPL__/static/img/language.png" alt=""></a>
    
    </div> -->

    <!-- 手机和平板 -->
    <div class="header_box_phone_btn">
      <img class="header_box_phone_btn_menu" src="__TMPL__/static/img/menu.png" alt="">
      <img class="header_box_phone_btn_close" src="__TMPL__/static/img/close.png" alt="">
    </div>
  </div>

  <div class="header_box_phone_navBox">
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/index/index?_design_theme=default_en-us')}">Home</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Products/index?_design_theme=default_en-us')}">Products</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Supplychain/index?_design_theme=default_en-us')}">Supply Chain</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Carbontrace/index?_design_theme=default_en-us')}">Carbon Trace</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Warehouse/index?_design_theme=default_en-us')}">Warehouse</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/Building/index?_design_theme=default_en-us')}">Building Design</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="{:cmf_url('portal/About/index?_design_theme=default_en-us')}">About</a>
    </div>
    <div class="header_box_phone_navBox_item">
      <a href="http://www.ecocarbontrace.com/" target="_blank">Log In</a>
    </div>
    <div class="header_box_phone_navBox_img">
      <a href="?_design_theme=default"><img src="__TMPL__/static/img/language.png" alt=""></a>
    </div>
  </div>
  <taglib name="app\portal\taglib\Portal" />
</header>

<script>

  $(document).ready(function () {
    $(document).off('click.bs.dropdown.data-api');
  });

  function dropdownOpen () {

    var $dropdownLi = $('.dropdown');

    $dropdownLi.mouseover(function () {
      $(this).addClass('open');
    }).mouseout(function () {
      $(this).removeClass('open');
    });
  }
  // $(document).ready(function () {
  //   $(document).off('click.bs.dropdown.data-api');
  // });

  $(document).ready(function () {
    dropdownOpen();//调用
  });
  // http://carbontracking.com/?_design_theme=default_en-us
  var path = window.location.pathname
  var headerBoxNavItems = document.querySelectorAll('.header_box_nav_item')
  headerBoxNavItems.forEach(function (item) {
    var a = item.querySelector('a')

    const pathString = path
    const thirdDotIndex = pathString.indexOf('.', pathString.indexOf('.') + 1)
    const result = pathString.slice(0, thirdDotIndex)

    if (a.getAttribute('href').indexOf(result) !== -1) {
      item.classList.add('active')
    }
  })
  if (path == '/') {
    headerBoxNavItems.forEach(function (item) {
      item.classList.remove('active')
    })
    headerBoxNavItems[0].classList.add('active')
  }

  // 手机端导航
  var headerBoxPhoneBtnMenu = document.getElementsByClassName('header_box_phone_btn_menu')[0]
  var headerBoxPhoneBtnClose = document.getElementsByClassName('header_box_phone_btn_close')[0]
  var headerBoxPhoneNavBox = document.getElementsByClassName('header_box_phone_navBox')[0]
  headerBoxPhoneBtnMenu.onclick = function () {
    headerBoxPhoneBtnClose.style = 'display : block'
    headerBoxPhoneBtnMenu.style = 'display : none'
    headerBoxPhoneNavBox.style = 'transform : translateY(0)'
  }
  headerBoxPhoneBtnClose.onclick = function () {
    headerBoxPhoneBtnClose.style = 'display : none'
    headerBoxPhoneBtnMenu.style = 'display : block'
    headerBoxPhoneNavBox.style = 'transform : translateY(-100%)'
  }
</script>