<!DOCTYPE html>
<html>
<head>
    <include file="public@head"/>
</head>
<body>
<div id="news" class="news">
    <div class="banner">
        <div class="news_banner_text">了解最新的资讯与动态</div>
    </div>
    <div class="typelist">
        <ul class="type">
            <volist name="typeList" id="vo">
                <li data-url="category=$vo.id"><a href="{:cmf_url('portal/News/list',array('category'=>$vo.id))}">{$vo.name}</a>
                </li>
            </volist>
        </ul>
    </div>
    <div class="list">
		<volist name="list" id="vo">
		    <div class="item">
		    	<a href="{:cmf_url('portal/News/detail',array('id'=>$vo['id'],'cid'=>$vo['category_id']))}">
		    		<img src="{:cmf_get_image_url($vo.thumbnail)}" alt="">
		    		<div class="title">{$vo.post_title}</div>
		    		<div class="content">
		    			{$vo.post_content|htmlspecialchars_decode|strip_tags|mb_substr=0,100}
		    		</div>
		    	</a>
		    </div>
		</volist>
        
    </div>
	<div class="pageLimitbox">
	    <ul class="pagination">{$page|default=''}</ul>
	    <ul id="pageLimit" class="pagination pagination-lg"></ul>
	</div>
</div>
<include file="public@footer"/>
</body>
<script src="__TMPL__/public/assets/style/js/bootstrap-paginator.js"></script>
<script type="text/javascript">
    $(function () {
        activeNav();
		let arr = <?php echo $typeList ?> ;
		
        function activeNav() {
            $('.news-tab li').removeClass('active');
            var location = window.location.search;
            if (!location) {
                $(".news-tab li").eq(0).addClass("active")
            } else {
                location = location.replace("?", "");
                for (var i = 0; i < $('.header-box li').length; i++) {
                    if ($('.news-tab li').eq(i).data('url') == location) {
                        $('.news-tab li').eq(i).addClass('active');
                        return true
                    }
                }
            }
        };
		/* $.ajax({
            type: "post",
            url: "{:url('portal/News/list')}" ,
            data: {category: parseInt(arr[0].id) },
            dataType: "json",
            success: function (result) {
                console.log(result);//打印服务端返回的数据(调试用)
                if (result.code == 1) {
                    //alert("提交成功")
                    if(result.data!=null){
						alert(result.data)
                    }else {
                        alert("");
                    }

                };
            },
            error : function() {
                alert("未查询到该员工！");
            }
        }) */
       
    })
</script>
</body>
</html>